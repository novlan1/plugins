:::info 作者

novlan1

2025.9.28
:::

# Next Admin 组件统计

地址：https://novlan1.github.io/docs/next-admin/component-statistics

## 1. 搜索语法

简单搜索，直接输入想搜的内容即可，如：

<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/9/own_mike_zst6QiC2sMKAay22.png" width="600" />

高级搜索，可以按字段搜索：

- 搜索某组件库，如想搜素 `Press UI` 组件库，可以输入 `library:press-ui`
- 搜索某项目，如想搜素 `gp-next` 项目，可以输入 `project:gp-next`
- 搜索某组件，如想搜素 `press-list` 组件，可以输入 `component:press-list`
- 多个字段搜索，可以使用分号连接，如 `library:press-ui;project:gp-next`，表示搜索使用 `press-ui` 组件库的 `gp-next` 项目

<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/9/own_mike_2B8BwGWmmJjssJdm.png" width="600" />

## 2. 聚合

支持根据组件库、组件、项目维度进行聚合。

|选项|观察目标|
|---|---|
|组件库|每个组件库的被引用数|
|组件库、组件|每个组件的被引用数|
|组件库、项目|每个项目对不同组件库的引用数|
|组件库、组件、项目|每个项目对不同组件的引用数|
|项目|每个项目对所有组件的引用数|

## 3. 堆叠折线图

可观察每个组件库每天的被引用总数，可横向对比不同组件库，也可纵向对比不同时间段的被引用趋势。

## 4. 统计意义

组件复用率越高，证明组件库的质量越高，通用性越强，稳定性越好，影响力越大。

提高组件复用率：

- 对开发人员来说，可以减少重复开发，提高开发效率
- 对项目来说，既可以缩短工时，也可以提高项目质量

统计和量化组件复用率，有利于对组件使用情况进行横向和纵向比较，直观、清晰，也可在库（组件）升级迁移中提供参考。

如果一个组件被不同类型的业务引用，间接证明它与单一业务解耦，业务入侵少或零入侵。

## 5. FAQ

### 5.1. 统计方案

每天、每个组件库、每个项目、每个组件的使用数目是唯一的，设计了一个唯一 `key`，即 `${date}__${library}__${project}__${component}`。

录入数据的时候，先查询是否有该 `key`，如果有，则更新使用数目，如果没有，则新增。

### 5.2. 统计项目

包含以下组的前端项目：

- `pmd-mobile`
- `pvpesports`
- `coecology`
- `slolnes`

排除了以下无效项目：

- `pmd-mobile/{app,movie,hippy,tip-flutter,test,demo}/*`
- `pmd-mobile/pmd-h5/api`
- `pmd-mobile/pmd-h5/frontend-cloud`
- 组件库自身项目

### 5.3. 统计分支

各项目的主分支，业务项目基本都是 `develop`。

### 5.4. 统计起始日期

2025.9.26

### 5.5. 匹配模式

两种模式

1. 不按逗号拆分
2. 按逗号拆分

第一种可以识别：默认导出、命名空间导出

```js
// 统计后面的 press-toast（从路径）
import PressToast from 'press-ui/press-toast/press-toast.vue'

import Toast from 'press-ui/common/toast';
```

第二种可以识别：具名导出

```js
import { A, B, C } from 'press-ui/common/toast';
```
