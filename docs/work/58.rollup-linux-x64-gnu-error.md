:::info 作者

novlan1

2025.8.21

:::

# @rollup/rollup-linux-x64-gnu 依赖问题

[流水线构建](https://devops.aow.com/console/pipeline/tip-h5/p-1a9206fb5496417c9113b89e3b768350/detail/b-626aa74f8e614405bbaeb874b9e530ff/executeDetail)，如果[报错](https://devops.aow.com/console/pipeline/tip-h5/p-7347226bfd8d4c1699a8fcf92990ca87/detail/b-aca3b1d7e5d242d497e46dd9500346a4/executeDetail)如下：

```
Error: Cannot find module @rollup/rollup-linux-x64-gnu. npm has a bug related to optional dependencies (https://github.com/npm/cli/issues/4828). Please try `npm i` again after removing both package-lock.json and node_modules directory.
    at requireWithFriendlyError (/data/landun/workspace/node_modules/.pnpm/rollup@4.47.0/node_modules/rollup/dist/native.js:64:9)
    at Object.<anonymous> (/data/landun/workspace/node_modules/.pnpm/rollup@4.47.0/node_modules/rollup/dist/native.js:73:76)
    ... 2 lines matching cause stack trace ...
    at Module.load (node:internal/modules/cjs/loader:1288:32)
    at Module._load (node:internal/modules/cjs/loader:1104:12)
    at cjsLoader (node:internal/modules/esm/translators:346:17)
    at ModuleWrap.<anonymous> (node:internal/modules/esm/translators:286:7)
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24) {
  [cause]: Error: /lib64/libm.so.6: version `GLIBC_2.29' not found (required by /data/landun/workspace/node_modules/.pnpm/@rollup+rollup-linux-x64-gnu@4.47.0/node_modules/@rollup/rollup-linux-x64-gnu/rollup.linux-x64-gnu.node)
```

<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/8/own_mike_KZ8dC7RJJEE5dFyN.png" width="600" />

可以参考这个 [issue](https://github.com/vitejs/vite/discussions/15532)，在 `package.json` 中添加下面代码解决。

```json
"pnpm": {
  "overrides": {
    "rollup": "npm:@rollup/wasm-node"
  }
}
```
