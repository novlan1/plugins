import{_ as i,D as t,E as a,aj as e}from"./chunks/framework.CVwsV_-S.js";const k=JSON.parse('{"title":"移除选择器","description":"","frontmatter":{},"headers":[],"relativePath":"zh/postcss-plugin-remove-selector.md","filePath":"zh/postcss-plugin-remove-selector.md","lastUpdated":1771897449000}'),n={name:"zh/postcss-plugin-remove-selector.md"};function d(l,s,h,p,o,r){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="移除选择器" tabindex="-1">移除选择器 <a class="header-anchor" href="#移除选择器" aria-label="Permalink to &quot;移除选择器&quot;">​</a></h1><p align="center"><img src="https://img.shields.io/npm/dw/@novlan/postcss-plugin-remove-selector"><img src="https://img.shields.io/npm/unpacked-size/@novlan/postcss-plugin-remove-selector"><img src="https://img.shields.io/npm/v/@novlan/postcss-plugin-remove-selector"><img src="https://img.shields.io/npm/l/@novlan/postcss-plugin-remove-selector"><img src="https://img.shields.io/github/last-commit/novlan1/plugins"><img src="https://img.shields.io/github/created-at/novlan1/plugins"></p><p>可用于移除三方库中的不需要的样式，从而减小包体积。</p><h2 id="_1-作者" tabindex="-1">1. 作者 <a class="header-anchor" href="#_1-作者" aria-label="Permalink to &quot;1. 作者&quot;">​</a></h2><p><strong>novlan1</strong></p><h2 id="_2-如何使用" tabindex="-1">2. 如何使用 <a class="header-anchor" href="#_2-如何使用" aria-label="Permalink to &quot;2. 如何使用&quot;">​</a></h2><p>安装</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @novlan/postcss-plugin-remove-selector</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div><h3 id="简化模式-推荐" tabindex="-1">简化模式（推荐） <a class="header-anchor" href="#简化模式-推荐" aria-label="Permalink to &quot;简化模式（推荐）&quot;">​</a></h3><p>通过 <code>mode</code> 指定预设，只需关注 <code>used</code>/<code>unused</code>，无需手动配置 <code>file</code> 和 <code>selectorPattern</code>：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { postcssPluginRemoveSelector } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@novlan/postcss-plugin-remove-selector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    postcss: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        postcssPluginRemoveSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tdesign&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          used: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;home&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;add&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;search&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;close&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>使用 <code>customUsed</code> / <code>customUnused</code> 可在预设基础上增量追加，不会覆盖预设中已有的列表：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postcssPluginRemoveSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tdesign&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 在 tdesign 预设默认的 used 列表上，额外追加 &#39;star&#39; 和 &#39;heart&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  customUsed: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;star&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;heart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 从结果中额外移除 &#39;loading&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  customUnused: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;loading&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="标准模式" tabindex="-1">标准模式 <a class="header-anchor" href="#标准模式" aria-label="Permalink to &quot;标准模式&quot;">​</a></h3><p>通过 <code>list</code> 数组传入完整配置，适用于需要匹配多个文件的复杂场景：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { postcssPluginRemoveSelector } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@novlan/postcss-plugin-remove-selector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  TDESIGN_ICON_REMOVE_SELECTOR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@novlan/postcss-plugin-remove-selector/lib/tdesign-uniapp-icon&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    postcss: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postcssPluginRemoveSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TDESIGN_ICON_REMOVE_SELECTOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="_3-类型" tabindex="-1">3. 类型 <a class="header-anchor" href="#_3-类型" aria-label="Permalink to &quot;3. 类型&quot;">​</a></h2><p>插件支持两种配置方式，传入 <code>SimpleOptions</code>（简化模式）或 <code>Options</code>（标准模式）均可。</p><h3 id="simpleoptions-简化模式" tabindex="-1">SimpleOptions（简化模式） <a class="header-anchor" href="#simpleoptions-简化模式" aria-label="Permalink to &quot;SimpleOptions（简化模式）&quot;">​</a></h3><table tabindex="0"><thead><tr><th>属性</th><th>类型</th><th>是否必填</th><th>说明</th></tr></thead><tbody><tr><td><code>mode</code></td><td><code>&#39;tdesign&#39;</code></td><td>否</td><td>预设模式，设置后自动使用对应的 <code>file</code> 和 <code>selectorPattern</code> 默认值</td></tr><tr><td><code>file</code></td><td><code>RegExp | string</code></td><td>否</td><td>文件匹配规则。使用 <code>mode</code> 时可省略</td></tr><tr><td><code>used</code></td><td><code>string[]</code></td><td>否</td><td>正在使用的图标名称列表，这些图标会被保留</td></tr><tr><td><code>unused</code></td><td><code>string[]</code></td><td>否</td><td>未使用的图标名称列表，这些图标会被移除</td></tr><tr><td><code>customUsed</code></td><td><code>string[]</code></td><td>否</td><td>增量追加到 <code>used</code> 列表（不覆盖预设或已有的 <code>used</code>）</td></tr><tr><td><code>customUnused</code></td><td><code>string[]</code></td><td>否</td><td>增量追加到 <code>unused</code> 列表（不覆盖预设或已有的 <code>unused</code>）</td></tr><tr><td><code>selectorPattern</code></td><td><code>RegExp</code></td><td>否</td><td>选择器匹配模式。使用 <code>mode</code> 时可省略</td></tr><tr><td><code>debug</code></td><td><code>boolean</code></td><td>否</td><td>是否开启调试模式</td></tr></tbody></table><blockquote><p><code>mode</code> 和 <code>file</code> 至少需要指定一个。当 <code>mode</code> 和 <code>file</code>/<code>selectorPattern</code> 同时指定时，<code>file</code>/<code>selectorPattern</code> 优先。</p></blockquote><h3 id="options-标准模式" tabindex="-1">Options（标准模式） <a class="header-anchor" href="#options-标准模式" aria-label="Permalink to &quot;Options（标准模式）&quot;">​</a></h3><table tabindex="0"><thead><tr><th>属性</th><th>类型</th><th>是否必填</th><th>说明</th></tr></thead><tbody><tr><td><code>list</code></td><td><code>FileConfig[]</code></td><td>是</td><td>配置列表</td></tr><tr><td><code>debug</code></td><td><code>boolean</code></td><td>否</td><td>是否开启调试模式</td></tr></tbody></table><h3 id="fileconfig" tabindex="-1">FileConfig <a class="header-anchor" href="#fileconfig" aria-label="Permalink to &quot;FileConfig&quot;">​</a></h3><table tabindex="0"><thead><tr><th>属性</th><th>类型</th><th>是否必填</th><th>说明</th></tr></thead><tbody><tr><td><code>file</code></td><td><code>RegExp | string</code></td><td>是</td><td>文件匹配规则，可以是字符串或正则表达式</td></tr><tr><td><code>used</code></td><td><code>string[]</code></td><td>否</td><td>正在使用的图标名称列表，这些图标会被保留</td></tr><tr><td><code>unused</code></td><td><code>string[]</code></td><td>否</td><td>未使用的图标名称列表，这些图标会被移除</td></tr><tr><td><code>customUsed</code></td><td><code>string[]</code></td><td>否</td><td>增量追加到 <code>used</code> 列表（不覆盖已有的 <code>used</code>）</td></tr><tr><td><code>customUnused</code></td><td><code>string[]</code></td><td>否</td><td>增量追加到 <code>unused</code> 列表（不覆盖已有的 <code>unused</code>）</td></tr><tr><td><code>selectorPattern</code></td><td><code>RegExp</code></td><td>否</td><td>选择器匹配模式，只处理匹配该模式的选择器</td></tr></tbody></table><h3 id="内置预设" tabindex="-1">内置预设 <a class="header-anchor" href="#内置预设" aria-label="Permalink to &quot;内置预设&quot;">​</a></h3><table tabindex="0"><thead><tr><th>mode</th><th>说明</th><th>默认 file</th><th>默认 selectorPattern</th></tr></thead><tbody><tr><td><code>tdesign</code></td><td>TDesign UniApp 图标减包</td><td><code>/[@/]tdesign[/]uniapp[/]dist[/]icon[/]icon\\.[css|vue]/</code></td><td><code>/^\\.t-icon-[\\w-]+:before$/</code></td></tr></tbody></table><h2 id="_4-更新日志" tabindex="-1">4. 更新日志 <a class="header-anchor" href="#_4-更新日志" aria-label="Permalink to &quot;4. 更新日志&quot;">​</a></h2><p><a href="https://novlan1.github.io/plugins/changelog/postcss-plugin-remove-selector.html" target="_blank" rel="noreferrer">点此查看</a></p><h2 id="_5-效果" tabindex="-1">5. 效果 <a class="header-anchor" href="#_5-效果" aria-label="Permalink to &quot;5. 效果&quot;">​</a></h2><p>以 <a href="https://github.com/TDesignOteam/tdesign-uniapp-starter" target="_blank" rel="noreferrer">tdesign-uniapp-starter</a> 为例，使用此插件，可使小程序大小减少<code>138KB</code>，约<code>95.8%</code>。</p><p>使用前：</p><img src="https://cdn.uwayfly.com/article/2026/2/own_mike_4w2yXDz3tMcaJ2nx.png" width="600"><p>使用后：</p><img src="https://cdn.uwayfly.com/article/2026/2/own_mike_dsdB5TmAaedmkPr5.png" width="600">`,35)]))}const E=i(n,[["render",d]]);export{k as __pageData,E as default};
