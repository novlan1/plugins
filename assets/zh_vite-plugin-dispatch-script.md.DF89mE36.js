import{_ as i,D as a,E as t,aj as n}from"./chunks/framework.CVwsV_-S.js";const c=JSON.parse('{"title":"脚本分发","description":"","frontmatter":{},"headers":[],"relativePath":"zh/vite-plugin-dispatch-script.md","filePath":"zh/vite-plugin-dispatch-script.md","lastUpdated":1771897449000}'),p={name:"zh/vite-plugin-dispatch-script.md"};function h(l,s,e,k,r,d){return a(),t("div",null,s[0]||(s[0]=[n(`<h1 id="脚本分发" tabindex="-1">脚本分发 <a class="header-anchor" href="#脚本分发" aria-label="Permalink to &quot;脚本分发&quot;">​</a></h1><p align="center"><img src="https://img.shields.io/npm/dw/@plugin-light/vite-plugin-dispatch-script"><img src="https://img.shields.io/npm/unpacked-size/@plugin-light/vite-plugin-dispatch-script"><img src="https://img.shields.io/npm/v/@plugin-light/vite-plugin-dispatch-script"><img src="https://img.shields.io/npm/l/@plugin-light/vite-plugin-dispatch-script"><img src="https://img.shields.io/github/last-commit/novlan1/plugin-light"><img src="https://img.shields.io/github/created-at/novlan1/plugin-light"></p><p>同 Webpack 版本的脚本分发插件。</p><h2 id="_1-作者" tabindex="-1">1. 作者 <a class="header-anchor" href="#_1-作者" aria-label="Permalink to &quot;1. 作者&quot;">​</a></h2><p><strong>novlan1</strong></p><h2 id="_2-如何使用" tabindex="-1">2. 如何使用 <a class="header-anchor" href="#_2-如何使用" aria-label="Permalink to &quot;2. 如何使用&quot;">​</a></h2><p>安装</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @plugin-light/vite-plugin-dispatch-script</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div><p>在 <code>vite.config.ts</code> 中添加如下设置：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { dispatchScriptVitePlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@plugin-light/vite-plugin-dispatch-script&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    dispatchScriptVitePlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="_3-参数" tabindex="-1">3. 参数 <a class="header-anchor" href="#_3-参数" aria-label="Permalink to &quot;3. 参数&quot;">​</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IDispatchScriptOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 移动的脚本被放在分包统一的目录下，dispatchDir 为目录名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 不传的话，会使用随机值</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  dispatchDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 禁止移动的名单列表</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  blackList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 强制移动的名单列表，应保证没有子依赖在主包或其他分包中中</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  whiteList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h2 id="_4-常见问题" tabindex="-1">4. 常见问题 <a class="header-anchor" href="#_4-常见问题" aria-label="Permalink to &quot;4. 常见问题&quot;">​</a></h2><p>如果存在 JS/TS 文件引用 Vue 文件，会导致编译异常，这种本身就是不对的，Vue 文件只能被 Vue 文件引用，不能被 JS/TS 引用。</p><p>一个常见的错误场景是函数式调用组件，引入组件时，没有加条件编译。</p><h2 id="_5-更新日志" tabindex="-1">5. 更新日志 <a class="header-anchor" href="#_5-更新日志" aria-label="Permalink to &quot;5. 更新日志&quot;">​</a></h2><p><a href="./../changelog/vite-plugin-dispatch-script.html">点此查看</a></p>`,17)]))}const o=i(p,[["render",h]]);export{c as __pageData,o as default};
